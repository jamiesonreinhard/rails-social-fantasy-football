<h1><%= @post.title %></h1>
<h3>By: <%= @post.author %></h3>
<p><%= @post.content %></p>
<small>Posted by <%= @post.author %> <%= time_ago_in_words(@post.created_at)%> ago</small>
<hr class="horizontal-rule">

<%= simple_form_for [ @post, @comment ] do |f| %>

  <%= f.input :content, class: "mb-1", label: 'Comment on this post' %>
  <%= f.hidden_field :author, value: current_user.name %>
  <%= f.hidden_field :post_id, value: @post.id %>
  <%= f.hidden_field :user_id, value: @user.id %>
  
  <%= f.submit "Comment", class: "btn btn-light" %>
<% end %>

<% @post.comments.sort_by(&:created_at).reverse.each do |comment| %>
  <div class="comment-card">
    <div class="comment-card-details">
      <p><%= comment.content %></p>
      <div>
        <small><strong><%= comment.author %></strong> | <%= time_ago_in_words(comment.created_at) %> ago</small>
      </div>
    </div>
    <% if comment.user_id == current_user.id %>
      <%= link_to "ðŸ—‘", post_comment_path(id: comment.id, post_id: @post.id), method: :delete,
        data: { confirm: 'Are you sure you want to delete this comment?'} %>
    <% end %>
  </div>
<% end %>

<div class="post-actions">
<%= link_to "League Dashboard", league_path(@post.league), class: "btn btn-outline-light mt-3 mb-1" %>
<% if @post.user == current_user %>

  <%= link_to "Edit Post", edit_post_path(@post), class: "btn btn-outline-light mb-1" %>
  <%= link_to "Delete Post", post_path(@post), method: :delete,
    data: { confirm: 'Are you sure you want to delete this post?'},
    class: "btn btn-outline-danger mb-1" %>
</div>
<% end %>

